(function(){function a(b){this._stage=b;this._eventManager=new simplejump.EventManager;this._label=new createjs.Text("BACK TO START","35px Verdana","#000000");this._resultTxt=new createjs.Text("Game Over.","35px Verdana","#000000");this._scoreTxt=new createjs.Text("Final Score:","35px Verdana","#000000");this._outShape=new createjs.Shape;this._overShape=new createjs.Shape;this._pressShape=new createjs.Shape;this.initialize();this._setupUI()}a.prototype=new createjs.Container;a.prototype.BACK_TO_START_CLICKED=
"backToStartClicked";a.prototype.setResult=function(b,a){this._resultTxt.text=b?"Game Over. You Won!":"Game Over. You Lost!";this._scoreTxt.text="Final Score: "+a};a.prototype.getEventManager=function(){return this._eventManager};a.prototype._setupUI=function(){var b;b=this;this._resultTxt.textAlign="center";this._resultTxt.textBaseline="alphabetic";this._resultTxt.x=this._stage.canvas.width/2;this.addChild(this._resultTxt);this._scoreTxt.textAlign="center";this._scoreTxt.textBaseline="alphabetic";
this._scoreTxt.x=this._stage.canvas.width/2;this.addChild(this._scoreTxt);this._label.textAlign="center";this._label.textBaseline="alphabetic";this._label.x=this._stage.canvas.width/2;this._resultTxt.y=canvas.height/2-75+35;this._scoreTxt.y=canvas.height/2-25+35;this._label.y=this._stage.canvas.height/2+60;this.addChild(this._label);this._outShape.x=this._label.x-(this._label.getMeasuredWidth()+40)/2;this._outShape.y=this._stage.canvas.height/2+25;this._outShape.graphics.beginFill("#87cefa");this._outShape.graphics.drawRect(0,
0,this._label.getMeasuredWidth()+40,45);this._overShape.x=this._outShape.x;this._overShape.y=this._outShape.y;this._overShape.graphics.beginFill("#00bfff");this._overShape.graphics.drawRect(0,0,this._label.getMeasuredWidth()+40,45);this._pressShape.x=this._outShape.x;this._pressShape.y=this._outShape.y;this._pressShape.graphics.beginFill("#1e90ff");this._pressShape.graphics.drawRect(0,0,this._label.getMeasuredWidth()+40,45);this.onMouseOut=function(){b.removeChildAt(0);b.addChildAt(b._outShape,0)};
this.onMouseOver=function(){b.removeChildAt(0);b.addChildAt(b._overShape,0)};this.onPress=function(){b.removeChildAt(0);b.addChildAt(b._pressShape,0)};this.onClick=function(){b.removeChildAt(0);b.addChildAt(b._overShape,0);b._eventManager.dispatchEvent(b.BACK_TO_START_CLICKED)};this.addChildAt(this._outShape,0)};window.simplejump=window.simplejump||{};window.simplejump.view=window.simplejump.view||{};window.simplejump.view.EndView=function(b){return new a(b)}})();(function(){function a(){this._listeners=[]}a.prototype.addListener=function(b,a){var c,d,e;c=!1;d=0;for(e=this._listeners.length;d<e;d++)if(this._listeners[d].type===b&&this._listeners[d].fn===a){c=!0;break}c||this._listeners.push({type:b,fn:a})};a.prototype.removeListener=function(b,a){var c,d,e;c=!1;d=0;for(e=this._listeners.length;d<e;d++)if(this._listeners[d].type===b&&this._listeners[d].fn===a){c=!0;break}c&&this._listeners.splice(d,1)};a.prototype.dispatchEvent=function(b){var a,c;a=0;for(c=
this._listeners.length;a<c;a++)this._listeners[a].type===b&&this._listeners[a].fn()};window.simplejump=window.simplejump||{};window.simplejump.EventManager=function(){return new a}})();(function(){function a(){this._eventManager=new simplejump.EventManager;this._playerSettings=new simplejump.game.PlayerSettings;this._platformSettings=new simplejump.game.PlatformSettings;this._levelSettings=new simplejump.game.LevelSettings;this._playerWon=!1;this._levelHolder=new createjs.Container;this._level=new simplejump.game.Level(this._levelSettings,this._playerSettings,this._platformSettings);this._scoreBoard=null;this._score=0;this.initialize();this._setupUI()}a.prototype.GAME_OVER="gameOver";
a.prototype=new createjs.Container;a.prototype.getPlayerWon=function(){return this._playerWon};a.prototype.getFinalScore=function(){return this._score};a.prototype.getEventManager=function(){return this._eventManager};a.prototype._setupUI=function(){var b=this;this._levelHolder.addChild(this._level);this.addChild(this._levelHolder);this._levelHolder.y=50;this._drawScoreBoard();this._level.getEventManager().addListener(this._level.SCORE_CHANGE,function(){b._updateScore()});this._level.getEventManager().addListener(this._level.GAME_OVER,
function(){b._gameOver()})};a.prototype._drawScoreBoard=function(){this._scoreBoard=new createjs.Text("Score : 0","35px Verdana","#000000");this._scoreBoard.textAlign="center";this._scoreBoard.textBaseline="alphabetic";this._scoreBoard.x=this._levelSettings.levelWidth/2;this._scoreBoard.y=35;var b=new createjs.Shape;b.graphics.beginFill("#afffff");b.graphics.drawRect(0,0,this._levelSettings.levelWidth,50);this.addChild(b);this.addChild(this._scoreBoard)};a.prototype._gameOver=function(){this._level.cleanup();
this._playerWon=this._level.getPlayerWon();this._score=this._level.getScore();this._eventManager.dispatchEvent(this.GAME_OVER)};a.prototype._updateScore=function(){this._score=this._level.getScore();this._scoreBoard.text="Score : "+this._score.toString()};window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.Game=function(){return new a}})();(function(){function a(){this._eventManager=new simplejump.EventManager;this._game=null;this._playerWon=!1;this._finalScore=0;this.initialize()}a.prototype=new createjs.Container;a.prototype.GAME_OVER="gameOver";a.prototype.startGame=function(){var b=this;this._game=new simplejump.game.Game;this.addChild(this._game);this._game.getEventManager().addListener(this._game.GAME_OVER,function(){b._gameOver()})};a.prototype.getPlayerWon=function(){return this._playerWon};a.prototype.getFinalScore=function(){return this._finalScore};
a.prototype.getEventManager=function(){return this._eventManager};a.prototype._gameOver=function(){this.removeChild(this._game);this._playerWon=this._game.getPlayerWon();this._finalScore=this._game.getFinalScore();this._eventManager.dispatchEvent(this.GAME_OVER)};window.simplejump=window.simplejump||{};window.simplejump.view=window.simplejump.view||{};window.simplejump.view.GameView=function(b){return new a(b)}})();(function(){function a(b,a,c){this._eventManager=new simplejump.EventManager;this._levelSettings=b;this._playerSettings=a;this._platformSettings=c;this._platforms=[];this._player=null;this._cameraStartTime=this._cameraEndY=this._cameraStartY=0;this._playerWon=!1;this._lastPlatform=null;this._score=0;this.initialize();this._generatePlatforms();this._addPlayer()}a.prototype=new createjs.Container;a.prototype.GAME_OVER="gameOver";a.prototype.SCORE_CHANGE="scoreChange";a.prototype.getPlayerWon=function(){return this._playerWon};
a.prototype.getScore=function(){return this._score};a.prototype.getEventManager=function(){return this._eventManager};a.prototype.cleanup=function(){createjs.Ticker.removeListener(this);this._player.cleanup()};a.prototype.tick=function(){var b,a;b=createjs.Ticker.getTime()-this._cameraStartTime;a=this._playerSettings.jumpDuration/2;b<a?(b=this._cameraStartY+this._linear(b,0,this._cameraEndY-this._cameraStartY,a),this.y=-b):(this.y=-this._cameraEndY,createjs.Ticker.removeListener(this))};a.prototype._addPlayer=
function(){var b=this;this._player=new simplejump.game.Player(this._playerSettings);this.addChild(this._player);this._player.x=this._levelSettings.levelWidth/2-this._playerSettings.playerWidth/2;this._player.jump();this._player.getEventManager().addListener(this._player.PLAYER_FALLING,function(){b._playerFalling()});this._player.getEventManager().addListener(this._player.JUMP_COMPLETE,function(){b._jumpComplete()})};a.prototype._generatePlatforms=function(){var b,a,c,d,e;a=0;this._lastPlatform=c=
new simplejump.game.Platform(this._platformSettings);this.addChild(c);this._platforms.push(c);c.x=b=this._levelSettings.levelWidth/2-this._platformSettings.platformWidth/2;for(d=!1;!d;)e=Math.random()*(this._playerSettings.jumpDistance-this._playerSettings.playerWidth),c=Math.round(Math.random()),0===c?(b-=e,0>=b&&(b=0)):(b+=e,b+this._platformSettings.platformWidth>=this._levelSettings.levelWidth&&(b=this._levelSettings.levelWidth-this._platformSettings.platformWidth)),e=a+Math.random()*(this._playerSettings.jumpHeight-
this._playerSettings.playerHeight),e-a<this._platformSettings.platformHeight&&(e=a+this._platformSettings.platformHeight),e>=this._levelSettings.levelHeight-this._platformSettings.platformHeight-this._playerSettings.playerHeight-this._playerSettings.jumpHeight&&(e=this._levelSettings.levelHeight-this._platformSettings.platformHeight-this._playerSettings.playerHeight-this._playerSettings.jumpHeight,d=!0),d?(a=new simplejump.game.PlatformSettings,a.platformColor=this._platformSettings.platformColor,
a.platformHeight=this._platformSettings.platformHeight,a.platformWidth=this._levelSettings.levelWidth,c=new simplejump.game.Platform(a),c.x=0):(c=new simplejump.game.Platform(this._platformSettings),c.x=b),this.addChild(c),this._platforms.push(c),a=c.y=e};a.prototype._playerFalling=function(){var b=this._checkIntersects();null!==b&&(this._player.y=b.y+this._platformSettings.platformHeight,this._player.jump(),this._moveCamera(),this._updateScore(b),this._checkGameOver(b))};a.prototype._jumpComplete=
function(){this._checkGameOver(null)};a.prototype._checkIntersects=function(){var b,a;for(b=this._platforms.length-1;0<=b;b--)if(a=this._platforms[b],a.checkInteresects(this._player))return a;return null};a.prototype._checkGameOver=function(b){null===b&&(b=this._checkIntersects());null===b?(this._eventManager.dispatchEvent(this.GAME_OVER),this._player.stopJump()):b===this._platforms[this._platforms.length-1]&&(this._playerWon=!0,this._eventManager.dispatchEvent(this.GAME_OVER),this._player.stopJump())};
a.prototype._updateScore=function(b){b!==this._lastPlatform&&(this._lastPlatform=b,this._score+=this._levelSettings.platformScorePoints,this._eventManager.dispatchEvent(this.SCORE_CHANGE))};a.prototype._linear=function(b,a,c,d){return c*b/d+a};a.prototype._moveCamera=function(){this._cameraStartY=-this.y;this._cameraEndY=this._player.y-this._platformSettings.platformHeight;this._cameraStartTime=createjs.Ticker.getTime();createjs.Ticker.addListener(this)};window.simplejump=window.simplejump||{};window.simplejump.game=
window.simplejump.game||{};window.simplejump.game.Level=function(b,f,c){return new a(b,f,c)}})();(function(){function a(){}a.prototype.levelWidth=500;a.prototype.levelHeight=3E3;a.prototype.levelColor="#e0ffff";a.prototype.platformScorePoints=10;window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.LevelSettings=function(){return new a}})();(function(){function a(b){this._platformSettings=b;this.initialize();this.drawPlatform()}a.prototype=new createjs.Container;a.prototype.drawPlatform=function(){this.removeAllChildren();var b=new createjs.Shape;b.graphics.beginFill(this._platformSettings.platformColor);b.graphics.drawRect(0,0,this._platformSettings.platformWidth,this._platformSettings.platformHeight);this.addChild(b)};a.prototype.checkInteresects=function(b){var a,c,d,e,g;a=b.getLastPlayerMove();c=new createjs.Point(Math.round(this.x),
Math.round(this.y+this._platformSettings.platformHeight));d=new createjs.Point(Math.round(this.x+this._platformSettings.platformWidth),Math.round(this.y+this._platformSettings.platformHeight));e=new createjs.Point(Math.round(a.fromX),Math.round(a.fromY));g=new createjs.Point(Math.round(a.toX),Math.round(a.toY));if(this._lineIntersectLine(c,d,e,g))return!0;e=new createjs.Point(Math.round(a.fromX+b.getPlayerSettings().playerWidth),Math.round(a.fromY));g=new createjs.Point(Math.round(a.toX+b.getPlayerSettings().playerWidth),
Math.round(a.toY));return this._lineIntersectLine(c,d,e,g)?!0:!1};a.prototype._lineIntersectLine=function(b,a,c,d){var e,g,j,k,l,m,n,h;g=a.y-b.y;k=b.x-a.x;m=a.x*b.y-b.x*a.y;j=d.y-c.y;l=c.x-d.x;n=d.x*c.y-c.x*d.y;h=g*l-j*k;if(0===h)return!1;e=new createjs.Point;e.x=(k*n-l*m)/h;e.y=(j*m-g*n)/h;return Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2)>Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)||Math.pow(e.x-b.x,2)+Math.pow(e.y-b.y,2)>Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)||Math.pow(e.x-d.x,2)+Math.pow(e.y-d.y,2)>
Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2)||Math.pow(e.x-c.x,2)+Math.pow(e.y-c.y,2)>Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2)?!1:!0};window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.Platform=function(b){return new a(b)}})();(function(){function a(){}a.prototype.platformWidth=100;a.prototype.platformHeight=5;a.prototype.platformColor="#6b8e23";window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.PlatformSettings=function(){return new a}})();(function(){function a(a){var f=this;this._playerSettings=a;this._eventManager=new simplejump.EventManager;this._jumpStartY=this._jumpStartTime=0;this._rightDown=this._leftDown=this._up=!1;this._xDown=this._timeDown=0;this._lastPlayerMove=null;this.initialize();this.drawPlayer();window.onkeydown=function(a){f._handleKeyDown(a)};window.onkeyup=function(a){f._handleKeyUp(a)}}a.prototype=new createjs.Container;a.prototype.PLAYER_MOVED="playerMoved";a.prototype.PLAYER_FALLING="playerFalling";a.prototype.JUMP_COMPLETE=
"jumpComplete";a.prototype.drawPlayer=function(){this.removeAllChildren();var a=new createjs.Shape;a.graphics.beginFill(this._playerSettings.playerColor);a.graphics.drawRect(0,0,this._playerSettings.playerWidth,this._playerSettings.playerHeight);this.addChild(a)};a.prototype.jump=function(){this._jumpStartY=this.y;this._up=!0;this._jumpStartTime=createjs.Ticker.getTime();createjs.Ticker.addListener(this)};a.prototype.stopJump=function(){createjs.Ticker.removeListener(this)};a.prototype.getLastPlayerMove=
function(){return this._lastPlayerMove};a.prototype.getEventManager=function(){return this._eventManager};a.prototype.getPlayerSettings=function(){return this._playerSettings};a.prototype.cleanup=function(){createjs.Ticker.removeListener(this);window.onkeydown=null;window.onkeyup=null};a.prototype.tick=function(){var a,f,c,d,e;a=!1;f=createjs.Ticker.getTime();c=f-this._jumpStartTime;d=this.x;e=this.y;c<this._playerSettings.jumpDuration?(this._up&&c>=this._playerSettings.jumpDuration/2&&(this.y=this._jumpStartY+
this._playerSettings.jumpHeight,this._up=!this._up),this.y=this._up?this._jumpStartY+this._quadEaseOut(c,0,this._playerSettings.jumpHeight,this._playerSettings.jumpDuration/2):this._jumpStartY+this._playerSettings.jumpHeight-this._quadEaseIn(c-this._playerSettings.jumpDuration/2,0,this._playerSettings.jumpHeight,this._playerSettings.jumpDuration/2)):(this.y=this._jumpStartY,this._up=!this._up,this._jumpStartTime=createjs.Ticker.getTime(),a=!0);this._rightDown&&(c=f-this._timeDown,c=c*this._playerSettings.jumpDistance/
this._playerSettings.jumpDuration+this._xDown,c+this._playerSettings.playerWidth>=this._playerSettings.maximumDistance&&(c=this._playerSettings.maximumDistance-this._playerSettings.playerWidth),this.x=c);this._leftDown&&(c=f-this._timeDown,c=this._xDown-c*this._playerSettings.jumpDistance/this._playerSettings.jumpDuration,0>=c&&(c=0),this.x=c);this._lastPlayerMove=new simplejump.game.PlayerMove(d,this.x,e,this.y);this._eventManager.dispatchEvent(this.PLAYER_MOVED);this._up||this._eventManager.dispatchEvent(this.PLAYER_FALLING);
a&&this._eventManager.dispatchEvent(this.JUMP_COMPLETE)};a.prototype._quadEaseIn=function(a,f,c,d){return c*(a/=d)*a+f};a.prototype._quadEaseOut=function(a,f,c,d){return-c*(a/=d)*(a-2)+f};a.prototype._handleKeyDown=function(a){39===a.keyCode&&!this._rightDown&&(this._leftDown=!1,this._rightDown=!0,this._timeDown=createjs.Ticker.getTime(),this._xDown=this.x);37===a.keyCode&&!this._leftDown&&(this._rightDown=!1,this._leftDown=!0,this._timeDown=createjs.Ticker.getTime(),this._xDown=this.x)};a.prototype._handleKeyUp=
function(a){39===a.keyCode&&(this._rightDown=!1);37===a.keyCode&&(this._leftDown=!1)};window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.Player=function(b){return new a(b)}})();(function(){function a(a,f,c,d){this.fromX=a;this.toX=f;this.fromY=c;this.toY=d}window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.PlayerMove=function(b,f,c,d){return new a(b,f,c,d)}})();(function(){function a(){}a.prototype.jumpDuration=2E3;a.prototype.jumpHeight=200;a.prototype.jumpDistance=200;a.prototype.playerWidth=50;a.prototype.playerHeight=50;a.prototype.playerColor="#000000";a.prototype.maximumDistance=500;window.simplejump=window.simplejump||{};window.simplejump.game=window.simplejump.game||{};window.simplejump.game.PlayerSettings=function(){return new a}})();(function(){function a(){this._endView=this._gameView=this._startView=this._background=this._stage=this._canvas=this._levelSettings=null}a.prototype.init=function(){var a=this;this._levelSettings=new simplejump.game.LevelSettings;this._canvas=document.getElementById("canvas");this._canvas.width=this._levelSettings.levelWidth;this._canvas.height=window.innerHeight;this._canvas.style.marginLeft=(window.innerWidth/2-this._canvas.width/2).toString()+"px";createjs.Ticker.setFPS(60);createjs.Ticker.useRAF=
!0;this._stage=new createjs.Stage("canvas");createjs.Ticker.addListener(this._stage);this._background=new createjs.Shape;this._background.graphics.beginFill(this._levelSettings.levelColor);this._background.graphics.drawRect(0,0,this._levelSettings.levelWidth,this._canvas.height);this._stage.addChild(this._background);this._startView=new simplejump.view.StartView(this._stage);this._gameView=new simplejump.view.GameView(this._stage);this._endView=new simplejump.view.EndView(this._stage);this._startView.getEventManager().addListener(this._startView.PLAY_CLICKED,
function(){a._showGameView()});this._gameView.getEventManager().addListener(this._gameView.GAME_OVER,function(){a._endView.setResult(a._gameView.getPlayerWon(),a._gameView.getFinalScore());a._showEndView()});this._endView.getEventManager().addListener(this._endView.BACK_TO_START_CLICKED,function(){a._showStartView()});this._showStartView()};a.prototype._showStartView=function(){this._stage.removeChild(this._endView);this._stage.enableMouseOver(20);this._stage.addChild(this._startView)};a.prototype._showGameView=
function(){this._stage.removeChild(this._startView);this._stage.enableMouseOver(0);this._stage.addChild(this._gameView);this._gameView.startGame()};a.prototype._showEndView=function(){this._stage.removeChild(this._gameView);this._stage.enableMouseOver(20);this._stage.addChild(this._endView)};window.simplejump=window.simplejump||{};window.simplejump.SimpleJump=new a})();(function(){function a(a){this._stage=a;this._label=new createjs.Text("PLAY!","35px Verdana","#000000");this._overShape=new createjs.Shape;this._outShape=new createjs.Shape;this._pressShape=new createjs.Shape;this._eventManager=new simplejump.EventManager;this.initialize();this._setupUI()}a.prototype=new createjs.Container;a.prototype.PLAY_CLICKED="playClicked";a.prototype.getEventManager=function(){return this._eventManager};a.prototype._setupUI=function(){var a;a=this;this._label.textAlign="center";
this._label.textBaseline="alphabetic";this._label.x=this._stage.canvas.width/2;this._label.y=this._stage.canvas.height/2-17.5+35;this.addChild(this._label);this._outShape.x=this._label.x-(this._label.getMeasuredWidth()+40)/2;this._outShape.y=this._stage.canvas.height/2-17.5;this._outShape.graphics.beginFill("#87cefa");this._outShape.graphics.drawRect(0,0,this._label.getMeasuredWidth()+40,45);this._overShape.x=this._outShape.x;this._overShape.y=this._outShape.y;this._overShape.graphics.beginFill("#00bfff");
this._overShape.graphics.drawRect(0,0,this._label.getMeasuredWidth()+40,45);this._pressShape.x=this._outShape.x;this._pressShape.y=this._outShape.y;this._pressShape.graphics.beginFill("#1e90ff");this._pressShape.graphics.drawRect(0,0,this._label.getMeasuredWidth()+40,45);this.onMouseOut=function(){a.removeChildAt(0);a.addChildAt(a._outShape,0)};this.onMouseOver=function(){a.removeChildAt(0);a.addChildAt(a._overShape,0)};this.onPress=function(){a.removeChildAt(0);a.addChildAt(a._pressShape,0)};this.onClick=
function(){a.removeChildAt(0);a.addChildAt(a._overShape,0);a._eventManager.dispatchEvent(a.PLAY_CLICKED)};this.addChildAt(this._outShape,0)};window.simplejump=window.simplejump||{};window.simplejump.view=window.simplejump.view||{};window.simplejump.view.StartView=function(b){return new a(b)}})();
